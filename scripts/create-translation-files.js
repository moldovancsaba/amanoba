const fs = require('fs');
const en = JSON.parse(fs.readFileSync('messages/en.json', 'utf-8'));

// Deep clone function
function deepClone(obj) {
  return JSON.parse(JSON.stringify(obj));
}

// Translation mappings for Bulgarian
function translateToBulgarian(key, value) {
  // Key translations - this is a simplified version
  // In production, this would be a comprehensive translation dictionary
  const translations = {
    'common.loading': 'Зареждане...',
    'common.error': 'Грешка',
    'common.success': 'Успех',
    'common.save': 'Запази',
    'common.cancel': 'Отказ',
    'common.delete': 'Изтрий',
    'common.edit': 'Редактирай',
    'common.create': 'Създай',
    'common.back': 'Назад',
    'common.next': 'Напред',
    'common.previous': 'Предишен',
    'common.submit': 'Изпрати',
    'common.close': 'Затвори',
    'common.search': 'Търсене',
    'common.filter': 'Филтър',
    'common.sort': 'Сортиране',
    'common.actions': 'Действия',
    'common.dashboard': 'Табло',
    'common.view': 'Преглед',
    'common.active': 'Активен',
    'common.inactive': 'Неактивен',
    'common.premium': 'Премиум',
    'common.free': 'Безплатно',
    'common.yes': 'Да',
    'common.no': 'Не',
    'common.status': 'Статус',
    'common.type': 'Тип',
    'common.name': 'Име',
    'common.description': 'Описание',
    'common.createdAt': 'Създадено',
    'common.updatedAt': 'Обновено',
    'common.total': 'Общо',
    'common.count': 'Брой',
    'common.copied': 'Копирано!',
    'common.points': 'точки',
    'common.xp': 'XP',
    'common.retry': 'Опитай отново',
    'common.noDataFound': 'Няма данни',
    'auth.signIn': 'Вход',
    'auth.signOut': 'Изход',
    'auth.signUp': 'Регистрация',
    'auth.continueWithoutRegistration': 'Продължи без регистрация',
    'auth.signInWithSSO': 'Вход с SSO',
    'auth.signInWithFacebook': 'Вход с Facebook',
    'auth.welcome': 'Добре дошли',
    'auth.email': 'Имейл',
    'auth.password': 'Парола',
    'auth.forgotPassword': 'Забравена парола',
    'auth.tagline': 'Учи. Расти. Постигай.',
    'auth.whyJoin': 'Защо да се присъединиш към Amanoba?',
    'auth.dailyLessons': 'Дневни уроци',
    'auth.interactiveAssessments': 'Интерактивни оценки',
    'auth.tryGamesInstantly': 'Опитай игри веднага с произволно потребителско име',
    'auth.creatingAccount': 'Създаване на акаунт...',
    'courses.title': 'Курсове',
    'courses.myCourses': 'Моите курсове',
    'courses.availableCourses': 'Налични курсове',
    'courses.enroll': 'Запиши се',
    'courses.enrolled': 'Записан',
    'courses.enrollInCourse': 'Запиши се за курс',
    'courses.courseDescription': 'Описание на курса',
    'courses.duration': 'Продължителност',
    'courses.days': 'дни',
    'courses.lessons': 'уроци',
    'courses.startCourse': 'Започни курс',
    'courses.continueLearning': 'Продължи обучението',
    'courses.completed': 'Завършен',
    'courses.inProgress': 'В процес',
    'courses.notStarted': 'Не е започнат',
    'courses.day': 'Ден',
    'courses.lesson': 'Урок',
    'courses.completeLesson': 'Завърши урок',
    'courses.markAsComplete': 'Маркирай като завършен',
    'courses.nextLesson': 'Следващ урок',
    'courses.previousLesson': 'Предишен урок',
    'courses.previousDay': 'Предишен ден',
    'courses.nextDay': 'Следващ ден',
    'courses.completing': 'Завършване...',
    'courses.testYourKnowledge': 'Тествай знанията си',
    'courses.assessmentDescription': 'Завърши играта за оценка, за да затвърдиш наученото. Резултатите ти ще бъдат свързани с този урок.',
    'courses.playAssessment': 'Играй оценка →',
    'courses.backToCourse': 'Назад към курса',
    'courses.lessonNotFound': 'Урок не е намерен',
    'courses.backToMyCourses': 'Назад към моите курсове',
    'courses.loadingLesson': 'Зареждане на урок...',
    'courses.completePreviousLessons': 'Завърши предишните уроци, за да отключиш този.',
    'courses.lessonLocked': 'Урок е заключен',
    'courses.goToDay': 'Отиди на {{day}}. ден',
    'courses.dayNumber': '{{day}}. ден',
    'courses.mustPassQuiz': 'Трябва да преминеш теста, преди да завършиш този урок.',
    'courses.lessonCompleted': 'Урок завършен! Спечелихте точки и XP.',
    'courses.failedToComplete': 'Неуспешно завършване на урока',
    'courses.failedToLoadLesson': 'Неуспешно зареждане на урока',
    'courses.failedToStartAssessment': 'Неуспешно стартиране на оценката. Моля, опитай отново.',
    'courses.lessonQuiz': 'Тест на урока',
    'courses.quizDescription': 'Отговори на {{count}} въпроса, за да тестваш разбирането си.',
    'courses.quizRequired': 'Нуждаеш се от {{threshold}}%, за да преминеш.',
    'courses.takeQuiz': 'Направи тест',
    'courses.question': 'Въпрос',
    'courses.questionProgress': 'Въпрос {{current}} / {{total}}',
    'courses.backToLesson': 'Назад към урока',
    'courses.quizSupportiveRetry': 'Не съвсем. Нека прегледаме урока, след това опитай отново.',
    'courses.quizCorrect': 'Правилно. Добре свършено.',
    'courses.quizRequiredMessage': 'Трябва да преминеш теста (5/5), за да завършиш този урок. Използвай бутона "Направи тест", за да го отвориш.',
    'courses.quiz': 'Тест',
    'courses.loadingQuiz': 'Зареждане на тестовите въпроси...',
    'courses.noQuizQuestions': 'Няма налични тестови въпроси за този урок.',
    'courses.quizError': 'Възникна грешка при зареждане на въпросите.',
    'courses.someQuestionsNotFound': 'Някои въпроси не са намерени. Моля, опитай отново.',
    'courses.questionsNotFoundError': 'Тестовите въпроси не са намерени. Моля, обнови страницата и опитай отново.',
    'courses.answeredCount': '{{answered}} / {{total}} отговорени',
    'courses.submitQuiz': 'Изпрати тест',
    'courses.quizPassed': 'Тестът е преминат!',
    'courses.quizFailed': 'Тестът е провален',
    'courses.quizScore': '{{score}} / {{total}} ({{percentage}}%)',
    'courses.quizRequiredScore': 'Изисква се: {{threshold}}%',
    'courses.quizPassedMessage': 'Поздравления! Премина теста. Сега можеш да завършиш урока.',
    'courses.quizFailedMessage': 'Не премина теста. Нуждаеш се от {{threshold}}%, за да преминеш.',
    'courses.retakeQuiz': 'Направи теста отново',
    'courses.courseProgress': 'Напредък в курса',
    'courses.pointsEarned': 'Спечелени точки',
    'courses.xpEarned': 'Спечелен XP',
    'courses.assessment': 'Оценка',
    'courses.takeAssessment': 'Направи оценка',
    'courses.assessmentResults': 'Резултати от оценката',
    'courses.reviewCourse': 'Прегледай курс',
    'courses.browseAndEnroll': 'Разгледай и запиши се',
    'courses.searchCourses': 'Търси курсове',
    'courses.noCoursesAvailable': 'Няма налични курсове',
    'courses.checkBackSoon': 'Провери отново скоро',
    'courses.viewCourse': 'Прегледай курс',
    'courses.loadingCourses': 'Зареждане на курсове...',
    'courses.signInToView': 'Моля, влез, за да видиш курсовете',
    'courses.progress': 'Напредък',
    'courses.dayOf': '{{currentDay}}. ден от {{totalDays}}',
    'courses.daysCompleted': '{{count}} дни завършени',
    'courses.backToCourses': 'Назад към курсовете',
    'courses.aboutThisCourse': 'За този курс',
    'courses.whatYoullLearn': 'Какво ще научиш',
    'courses.dailyLessons': 'Дневни уроци',
    'courses.structuredLearning': 'Структурирано обучение за 30 дни',
    'courses.pointsEarned': 'Спечели точки за завършване',
    'courses.emailDelivery': 'Имейл доставка',
    'courses.dailyLessonsSent': 'Дневни уроци изпратени на твоя имейл',
    'courses.interactiveAssessments': 'Интерактивни оценки',
    'courses.testKnowledge': 'Тествай знанията си с игри',
    'courses.duration': 'Продължителност',
    'courses.pointsReward': 'Награда с точки',
    'courses.premiumCourse': 'Премиум курс',
    'courses.freeCourse': 'Безплатно',
    'courses.enrolling': 'Записване...',
    'courses.premiumRequired': 'Изисква се премиум',
    'courses.enrollNow': 'Запиши се сега',
    'courses.purchasePremium': 'Купи премиум',
    'courses.purchasing': 'Купуване...',
    'courses.paymentProcessing': 'Обработване на плащането...',
    'courses.paymentSuccess': 'Плащането е успешно!',
    'courses.paymentFailed': 'Плащането е неуспешно',
    'courses.payment_success': 'Плащането е успешно. Премиум достъпът е актуализиран.',
    'courses.payment_error': 'Плащането е неуспешно. Моля, опитай отново или се свържи с поддръжката.',
    'courses.alreadyPremium': 'Вече имаш премиум достъп',
    'courses.loadingCourse': 'Зареждане на курс...',
    'courses.courseNotFound': 'Курсът не е намерен',
    'courses.failedToEnroll': 'Неуспешно записване за курс',
    'courses.dayOfTotal': '{{current}} / {{total}} ден',
    'courses.tableOfContents': 'Съдържание',
    'courses.minutes': 'минути',
    'courses.hasQuiz': 'Тест',
    'courses.noLessonsAvailable': 'Няма налични уроци в момента'
  };
  
  return translations[key] || value;
}

// Recursive translation function
function translateObject(obj, prefix = '', translations) {
  const result = {};
  for (const [key, value] of Object.entries(obj)) {
    const fullKey = prefix ? `${prefix}.${key}` : key;
    if (typeof value === 'object' && value !== null && !Array.isArray(value)) {
      result[key] = translateObject(value, fullKey, translations);
    } else {
      result[key] = translations[fullKey] || value;
    }
  }
  return result;
}

// For now, create a simplified version that uses English structure
// Full translations would need comprehensive dictionaries
console.log('Translation helper created. Full files need complete translation dictionaries.');
