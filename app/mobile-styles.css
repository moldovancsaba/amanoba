/**
 * Mobile-First Optimization Styles
 * 
 * Touch-friendly interactions, responsive games, and mobile UX improvements
 */

/* Touch-friendly buttons and interactive elements */
@media (max-width: 768px) {
  /* Base spacing and typography for small screens */
  body {
    font-size: 16px;
    line-height: 1.55;
    padding-left: 0;
    padding-right: 0;
  }

  h1 {
    font-size: 22px;
    line-height: 1.25;
  }

  h2 {
    font-size: 19px;
    line-height: 1.3;
  }

  h3 {
    font-size: 17px;
    line-height: 1.35;
  }

  .page-container {
    padding-left: 16px;
    padding-right: 16px;
  }

  /* Larger tap targets for mobile (minimum 44x44px) */
  button,
  a.button,
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
    padding: 12px 16px;
  }

  /* Prevent text selection on game elements */
  .game-canvas,
  .game-board,
  .game-controls {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
  }

  /* Smooth scrolling for mobile */
  html {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  /* Prevent pull-to-refresh on games */
  .game-container {
    overscroll-behavior-y: contain;
    position: fixed;
    width: 100%;
    height: 100%;
  }

  /* Better tap highlighting */
  * {
    -webkit-tap-highlight-color: rgba(99, 102, 241, 0.2);
  }

  /* Larger font sizes for readability */
  body {
    font-size: 16px;
    line-height: 1.5;
  }

  /* Responsive game containers */
  .game-whackpop,
  .game-quizzz,
  .game-memory,
  .game-madoku {
    max-width: 100vw;
    padding: 16px;
    box-sizing: border-box;
  }

  /* Stack dashboard cards vertically */
  .dashboard-grid {
    grid-template-columns: 1fr !important;
  }
  .dashboard-grid-2 {
    grid-template-columns: 1fr !important;
  }
  .dashboard-grid-3 {
    grid-template-columns: 1fr !important;
  }

  /* Full-width buttons on mobile */
  .mobile-full-width {
    width: 100%;
  }

  /* Sticky headers for better navigation */
  .mobile-sticky-header {
    position: sticky;
    top: 0;
    z-index: 50;
    background: inherit;
    backdrop-filter: blur(8px);
  }

  /* Touch-friendly spacing */
  .touch-spacing {
    margin: 16px 0;
  }

  /* Hide complex animations on mobile for performance */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* Landscape mode optimizations */
@media (max-width: 768px) and (orientation: landscape) {
  /* Compact header in landscape */
  header {
    padding: 8px 16px;
  }

  /* Maximize game area */
  .game-container {
    height: 100vh;
  }

  /* Hide less important UI elements */
  .landscape-hide {
    display: none;
  }
}

/* PWA optimizations */
@media (display-mode: standalone) {
  /* Remove top padding when installed as PWA */
  body {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Notch support for iPhone X+ */
  .pwa-safe-area {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
  }
}

/* Safe area bottom padding for notched devices (use class pb-safe on main/page containers) */
.pb-safe {
  padding-bottom: max(1rem, env(safe-area-inset-bottom, 1rem));
}

/* Touch gestures */
.swipeable {
  touch-action: pan-y pinch-zoom;
}

.no-scroll {
  overflow: hidden;
  position: fixed;
  width: 100%;
}

/* Loading states optimized for mobile */
@media (max-width: 768px) {
  .loading-skeleton {
    animation: pulse 1.5s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
}
